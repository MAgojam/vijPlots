---
name:  principal
title: Principal Component Analysis
jrs:   '1.1'
refs:
    - greenacre
    - gpa

items:
    - name:  helpMessage
      title: ""
      type:  Html
      visible: true
      content: '
            	<style>
					.block {
  						border: 2px solid gray;
  						border-radius: 15px;
  						background-color: WhiteSmoke;
  						padding: 0px 20px;
  						text-align: justify;
					}
				</style>
            <div class="block">
            <p><strong>Principal Component Analysis Help</strong></p>

            <p>This module computes <strong>Principal Component Analysis (PCA)</strong> for several continuous variables.
            Computations are based on <tt>stats::prcomp</tt> function.</p>

            <p>Although rotated components are not principal components, they are widely used.
            Only orthogonal rotations are available (from GPArotation package).</p>

            <p>Loadings (variable coordinates) and scores (observation coordinates) are principal (scaled by the squareroot of eigenvalues).

            <p>Biplot follows "Biplots in Practice" [Michael Greenacre, 2010]:
            <ul>
                <li><strong>Form biplot:</strong> Scores are principal (scaled by eigenvalues)
                while loadings are standard.</li>
                <li><strong>Covariance biplot:</strong> Loadings are principal while scores are standard. </li>
            </ul></p>

            <p><strong>Advanced options</strong>:
            <ul>
                <li><strong>Standardize loadings:</strong> loadings are normalized with sums of squared equal to 1 (instead of eigenvalues)</li>
                <li><strong>Standardize scores:</strong> scores are normalized with variances equal to 1 (instead of eigenvalues)</li>
                <li><strong>Rotate eigenvectors:</strong> the rotation (varimax, etc) is applied to eigenvectors (standard loadings)
                instead of principal loadings (Stata way).</li>
            </ul>
            </p>

            <p>A sample file is included at Open > Data Library > vijPlots > Iris</p>

            </div>'
    - name: summaryTable
      title: Summary
      visible: (showSummary)
      type: Table
      clearWith:
        - vars
        - dimNum
        - rotation
        - stdVariables
        - kaiser
        - stataRotation
      columns:
        - name: comp
          title: 'Component'
          type: 'text'
        - name: eigenvalue
          title: Eigenvalue
          superTitle: Initial Eigenvalues
          type: number
          format: "zto"
        - name: initVarProp
          title: '% of Variance'
          superTitle: Initial Eigenvalues
          type: number
          format: pc
        - name: initVarCum
          title: 'Cumulative %'
          superTitle: Initial Eigenvalues
          type: number
          format: pc
        - name: loadings
          title: SS Loadings
          superTitle: Extraction Sums of Squared Loadings
          type: number
          format: "zto"
        - name: varProp
          title: '% of Variance'
          superTitle: Extraction Sums of Squared Loadings
          type: number
          format: pc
        - name: varCum
          title: 'Cumulative %'
          superTitle: Extraction Sums of Squared Loadings
          type: number
          format: pc

    - name: kmoTable
      title: KMO & Bartlett's Test
      visible: (showKMO)
      type: Table
      columns:
        - name: test
          title: ''
          type: 'text'
        - name: statistic
          title: Statistic
          type: number
        - name: df
          title: df
          type: integer
        - name: p
          title: p
          type: number
          format: "zto"
      rows: 2
      clearWith:
        - vars

    - name: loadingTable
      title: Variables
      type: Table
      visible: (showLoadings)
      rows: (vars)
      clearWith:
        - vars
        - descAsVarName
        - rotation
        - dimNum
        - xaxis
        - yaxis
        - stdVariables
        - kaiser
        - stdLoadings
        - stataRotation
      columns:
        - name: var
          title: ""
          type: text
          content: ($key)
      notes:
        norm: Principal coordinates

    - name: obsTable
      title: Observations
      type: Table
      visible: (showObservations)
      clearWith:
        - vars
        - labelVar
        - descAsVarName
        - rotation
        - dimNum
        - xaxis
        - yaxis
        - stdVariables
        - kaiser
        - stdScores
        - stataRotation
      columns: []
      notes:
        norm: Principal coordinates

    - name: screePlot
      title: "Scree Plot"
      type: Image
      width:  500
      height: 300
      visible: (showScreePlot)
      renderFun: .screeplot
      clearWith:
        - vars
        - stdVariables
        - screeTitle
        - titleFontFace
        - titleFontSize
        - titleAlign
        - screeSubtitle
        - subtitleFontFace
        - subtitleFontSize
        - subtitleAlign

    - name: varPlot
      title: "Variable Plot"
      type: Image
      width:  600
      height: 600
      visible: (showVarPlot)
      renderFun: .varplot
      clearWith:
        - vars
        - descAsVarName
        - rotation
        - dimNum
        - xaxis
        - yaxis
        - stdVariables
        - kaiser
        - obsColor
        - varColor
        - colorPalette
        - labelColor
        - plotWidth
        - plotHeight
        - obsLabelSize
        - varLabelSize
        - pointSize
        - varTitle
        - titleFontFace
        - titleFontSize
        - titleAlign
        - varSubtitle
        - subtitleFontFace
        - subtitleFontSize
        - subtitleAlign
        - stdLoadings
        - stataRotation

    - name: obsPlot
      title: "Observation Plot"
      type: Image
      width:  600
      height: 600
      visible: (showObsPlot)
      renderFun: .obsplot
      clearWith:
        - vars
        - labelVar
        - descAsVarName
        - rotation
        - dimNum
        - xaxis
        - yaxis
        - groupVar
        - stdVariables
        - kaiser
        - obsColor
        - varColor
        - colorPalette
        - labelColor
        - plotWidth
        - plotHeight
        - obsLabelSize
        - varLabelSize
        - pointSize
        - obsTitle
        - titleFontFace
        - titleFontSize
        - titleAlign
        - obsSubtitle
        - subtitleFontFace
        - subtitleFontSize
        - subtitleAlign
        - stdScores
        - stataRotation

    - name: biPlot
      title: "Biplot"
      type: Image
      width:  600
      height: 600
      visible: (showBiplot)
      renderFun: .biplot
      clearWith:
        - vars
        - labelVar
        - descAsVarName
        - rotation
        - dimNum
        - xaxis
        - yaxis
        - groupVar
        - stdVariables
        - biplotType
        - biplotLines
        - biplotStretch
        - biplotStretchFactor
        - obsColor
        - varColor
        - colorPalette
        - labelColor
        - plotWidth
        - plotHeight
        - obsLabelSize
        - varLabelSize
        - pointSize
        - biplotTitle
        - titleFontFace
        - titleFontSize
        - titleAlign
        - biplotSubtitle
        - subtitleFontFace
        - subtitleFontSize
        - subtitleAlign
        - stataRotation
...
